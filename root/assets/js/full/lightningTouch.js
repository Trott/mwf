(function(){var a=function(j,k){this.element=j;this.handler=k;j.addEventListener("touchstart",this,false);j.addEventListener("click",this,false)};a.prototype.handleEvent=function(j){switch(j.type){case"touchstart":this.onTouchStart(j);break;case"touchmove":this.onTouchMove(j);break;case"touchend":this.onClick(j);break;case"click":this.onClick(j);break}};a.prototype.onTouchStart=function(j){j.stopPropagation();this.element.addEventListener("touchend",this,false);document.body.addEventListener("touchmove",this,false);this.startX=j.touches[0].clientX;this.startY=j.touches[0].clientY};a.prototype.onTouchMove=function(j){if(Math.abs(j.touches[0].clientX-this.startX)>10||Math.abs(j.touches[0].clientY-this.startY)>10){this.reset()}};a.prototype.onClick=function(j){j.stopPropagation();this.reset();this.handler(j)};a.prototype.reset=function(){this.element.removeEventListener("touchend",this,false);document.body.removeEventListener("touchmove",this,false)};var f=[],i=[],b=[];var d=function(l,k){var j=b.indexOf(k);if(j<0){j=b.length;b.push(k)}i[j]=l};var c=function(k,l,j){j=j||location.pathname+location.hash;d(k,j);history.replaceState(k,l,j)};var e=function(l){var k=l?location.pathname+"#/"+l:location.pathname+location.hash;var j=b.indexOf(k);return j<0?undefined:i[j]};var g=function(k,j){if(k.indexOf(j)<0){k.push(j)}return k};var h=function(){function l(m,p){var r,o;for(o=0;o<p.length;o++){r=document.getElementById(p[o]);if(r){r.setAttribute("style","display:none")}}var q=document.getElementById(m);var n=(mwf.userAgent.isNative()&&mwf.userAgent.getOS()=="android"&&m=="main_menu")?"display:inline":"display:block";if(q){q.setAttribute("style",n)}else{return false}return true}if(!window.location.hash){window.location.hash="#/main_menu"}l(window.location.hash.substring(2),[]);if(!(history instanceof Object&&history.replaceState instanceof Function)){return}this.touchHandler=function(q){var n=this.element.getAttribute("data-target-id");var s=document.getElementById(n);if(s!==null){q.preventDefault();var m=document.getElementById(window.location.hash.substr(2));var p=m?m.getAttribute("id"):"/main_menu";l(n,[p]);var r=e();var o=(r&&r.hasOwnProperty("hide"))?g(r.hide,n):[n];c({show:p,hide:o},"");window.location.hash="#/"+n;r=e();o=(r&&r.hasOwnProperty("hide"))?g(r.hide,p):[p];c({show:n,hide:o},"");if(mwf.site.analytics){mwf.site.analytics.trackPageview(this.element.pathname)}}};var k=document.getElementsByTagName("a");for(var j=0;j<k.length;j++){if(k[j].getAttribute("data-target-id")!=null){f.push(new a(k[j],this.touchHandler))}}this.popHandler=function(o){state=e();if(state){l(state.show,state.hide)}if(o.state){var m;var n;for(j=0;j<o.state.hide.length;j++){m=e(o.state.hide[j]);if(m){n=g(m.hide,o.state.show);d({show:o.state.hide[j],hide:n},location.pathname+"#/"+o.state.hide[j])}}l(o.state.show,o.state.hide)}};window.addEventListener("popstate",this.popHandler,false)};document.addEventListener("DOMContentLoaded",h,false)}());