/*! matchMedia() polyfill - Test a CSS media type/query in JS. Authors & copyright (c) 2012: Scott Jehl, Paul Irish, Nicholas Zakas. Dual MIT/BSD license */
window.matchMedia=window.matchMedia||(function(e,f){var c,a=e.documentElement,b=a.firstElementChild||a.firstChild,d=e.createElement("body"),g=e.createElement("div");g.id="mq-test-1";g.style.cssText="position:absolute;top:-100em";d.appendChild(g);return function(h){g.innerHTML='&shy;<style media="'+h+'"> #mq-test-1 { width: 42px; }</style>';a.insertBefore(d,b);c=g.offsetWidth==42;a.removeChild(d);return{matches:c,media:h}}})(document);
(function(a){"use strict",a.picturefill=function(){var b=a.document.getElementsByTagName("div");for(var c=0,d=b.length;c<d;c++)if(b[c].getAttribute("data-picture")!==null){var e=b[c].getElementsByTagName("div"),f=[];for(var g=0,h=e.length;g<h;g++){var i=e[g].getAttribute("data-media");(!i||a.matchMedia&&a.matchMedia(i).matches)&&f.push(e[g])}var j=b[c].getElementsByTagName("img")[0];f.length?(j||(j=a.document.createElement("img"),j.alt=b[c].getAttribute("data-alt"),b[c].appendChild(j)),j.src=f.pop().getAttribute("data-src")):j&&b[c].removeChild(j)}},a.addEventListener?(a.addEventListener("resize",a.picturefill,!1),a.addEventListener("DOMContentLoaded",function(){a.picturefill(),a.removeEventListener("load",a.picturefill,!1)},!1),a.addEventListener("load",a.picturefill,!1)):a.attachEvent&&a.attachEvent("onload",a.picturefill)})(this),function(a){"use strict";var b=a.localStorage,c=a.applicationCache,d,e,f,g,h;g=b.getItem("pfc_index")||"{}",h=JSON.parse(g);var i=function(){b.setItem("pfc_index",JSON.stringify({}))};c.addEventListener("updateready",i,!1),c.status===c.UPDATEREADY&&i();var j=!1,k=function(a){var c,d;for(var e=0,f=a.length;e<f;e++)if(a[e].getAttribute("data-picture")!==null){c=a[e].getElementsByTagName("div");for(var g=0,i=c.length;g<i;g++)(d=c[g].getAttribute("data-src"))!==null&&h.hasOwnProperty("pfc_s_"+d)&&c[g].setAttribute("data-src",b.getItem("pfc_s_"+d))}},l=function(){var c,d,e;c=a.document.createElement("canvas"),c.width=this.width,c.height=this.height,d=c.getContext("2d"),d.drawImage(this,0,0),f=c.toDataURL(),e=this.getAttribute("src"),b.setItem("pfc_s_"+e,f),h["pfc_s_"+e]=1,b.setItem("pfc_index",JSON.stringify(h))};a.picturefillOrig=a.picturefill,a.picturefill=function(){var b=a.document.getElementsByTagName("div");j||(j=!0,k(b)),a.picturefillOrig();for(var c=0,f=b.length;c<f;c++)b[c].getAttribute("data-picture")!==null&&(d=b[c].getElementsByTagName("img")[0],d&&(e=d.getAttribute("src"))!==null&&e.substr(0,5)!=="data:"&&d.addEventListener("load",l,!1))}}(this);