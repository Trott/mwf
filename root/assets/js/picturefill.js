/*! matchMedia() polyfill - Test a CSS media type/query in JS. Authors & copyright (c) 2012: Scott Jehl, Paul Irish, Nicholas Zakas. Dual MIT/BSD license */
window.matchMedia=window.matchMedia||(function(e,f){var c,a=e.documentElement,b=a.firstElementChild||a.firstChild,d=e.createElement("body"),g=e.createElement("div");g.id="mq-test-1";g.style.cssText="position:absolute;top:-100em";d.appendChild(g);return function(h){g.innerHTML='&shy;<style media="'+h+'"> #mq-test-1 { width: 42px; }</style>';a.insertBefore(d,b);c=g.offsetWidth==42;a.removeChild(d);return{matches:c,media:h}}})(document);
(function(a){"use strict",a.picturefill=function(){var b=a.document.getElementsByTagName("div");for(var c=0,d=b.length;c<d;c++)if(b[c].getAttribute("data-picture")!==null){var e=b[c].getElementsByTagName("div"),f=[];for(var g=0,h=e.length;g<h;g++){var i=e[g].getAttribute("data-media");(!i||a.matchMedia&&a.matchMedia(i).matches)&&f.push(e[g])}var j=b[c].getElementsByTagName("img")[0];f.length?(j||(j=a.document.createElement("img"),j.alt=b[c].getAttribute("data-alt"),b[c].appendChild(j)),j.src=f.pop().getAttribute("data-src")):j&&b[c].removeChild(j)}},a.addEventListener?(a.addEventListener("resize",a.picturefill,!1),a.addEventListener("DOMContentLoaded",function(){a.picturefill(),a.removeEventListener("load",a.picturefill,!1)},!1),a.addEventListener("load",a.picturefill,!1)):a.attachEvent&&a.attachEvent("onload",a.picturefill)})(this),function(a){"use strict";var b=a.localStorage,c=a.applicationCache,d,e,f,g,h,i=document.createElement("canvas");if(!c||c.status===c.UNCACHED||!b||!i.getContext||!i.getContext("2d"))return;g=b.getItem("pfc_index")||"{}",h=JSON.parse(g);var j=function(){b.removeItem("pfc_index")};c.addEventListener("updateready",j,!1),c.addEventListener("obsolete",j,!1),(c.status===c.UPDATEREADY||c.status===c.OBSOLETE)&&j();var k=!1,l=function(a){var c,d;for(var e=0,f=a.length;e<f;e++)if(a[e].getAttribute("data-picture")!==null){c=a[e].getElementsByTagName("div");for(var g=0,i=c.length;g<i;g++)(d=c[g].getAttribute("data-src"))!==null&&h.hasOwnProperty("pfc_s_"+d)&&c[g].setAttribute("data-src",b.getItem("pfc_s_"+d))}},m=function(){var c,d,e;e=this.getAttribute("src");if(e===null||e.length===0)return;c=a.document.createElement("canvas"),c.width=this.width,c.height=this.height,d=c.getContext("2d"),d.drawImage(this,0,0);try{f=c.toDataURL()}catch(g){return}h["pfc_s_"+e]=1;try{b.setItem("pfc_s_"+e,f),b.setItem("pfc_index",JSON.stringify(h))}catch(g){}};a.picturefillOrig=a.picturefill,a.picturefill=function(){var b=a.document.getElementsByTagName("div");k||(k=!0,l(b)),a.picturefillOrig();for(var c=0,f=b.length;c<f;c++)b[c].getAttribute("data-picture")!==null&&(d=b[c].getElementsByTagName("img")[0],d&&(e=d.getAttribute("src"))!==null&&e.substr(0,5)!=="data:"&&d.addEventListener("load",m,!1))}}(this);