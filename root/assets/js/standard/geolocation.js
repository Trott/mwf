mwf.touch.geolocation=new function(){var b=-1;var a=null;var d=true;var c=3000;var e=5000;this.getType=function(){if(b<0){b=navigator.geolocation?1:google.gears?2:0}return b};this.getTypeName=function(){switch(this.getType()){case 1:return"HTML5 Geolocation";case 2:return"Google Gears";default:return"Unsupported"}};this.isSupported=function(){return this.getType()>0};this.getPosition=function(h,f){var g;switch(this.getType()){case 1:g=navigator.geolocation;break;case 2:g=google.gears.factory.create("beta.geolocation");break;default:mwf.touch.geolication.setError("No geolocation support available.");f("No geolocation support available.");return}g.getCurrentPosition(function(i){if(typeof h!="undefined"){h({latitude:i.coords.latitude,longitude:i.coords.longitude,accuracy:i.coords.accuracy})}},function(){if(typeof f!="undefined"){f("Geolocation failure.")}},{enableHighAccuracy:d,maximumAge:c,timeout:e});return true};this.setTimeout=function(f){c=f};this.setHighAccuracy=function(f){d=f}};