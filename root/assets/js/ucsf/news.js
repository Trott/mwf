ucsf.news=(function(){var b={};b.loadFromStorage=function(c){var d;if(Modernizr.localstorage){d=window.localStorage.getItem(c);if(d!==null){return JSON.parse(d)}}return{}};b.render=function(c,e,g,d){var f;f=new google.feeds.Feed(g);if(d.numEntries){f.setNumEntries(d.numEntries)}f.load(function(q){var k,h,p,n,o,j,l,m={};if(!q.error){m={feed:this.feed};for(k=0;k<m.feed.entries.length;k=k+1){h=m.feed.entries[k];p={};n=new Date(h.publishedDate);p.date=n.toLocaleDateString();if(d.showTime){j=n.getMinutes();if(j<10){j="0"+j}o=n.getHours();l=o<12?"AM":"PM";if(o>12){o=o-12}if(o===0){o=12}p.time=o+":"+j+" "+l}h.dateTime=p}if(Modernizr.localstorage){window.localStorage.setItem(e,JSON.stringify(m))}}else{m=ucsf.news.loadFromStorage(e)}c.innerHTML=d.template.render(m)})};b.headlines=function(c,e,f,d){d=d||{};if(!d.template){d.template=new Hogan.Template(function(k,j,h){var g=this;g.b(h=h||"");if(g.s(g.f("feed",k,j,1),k,j,0,9,313,"{{ }}")){g.rs(k,j,function(m,l,i){i.b('<div class="menu detailed"><h2>');i.b(i.v(i.f("title",m,l,0)));i.b("</h2><ol>");if(i.s(i.f("entries",m,l,1),m,l,0,70,290,"{{ }}")){i.rs(m,l,function(q,o,n){n.b('  <li>    <a class="no-ext-ind" rel="external" href="');n.b(n.v(n.f("link",q,o,0)));n.b('"><span class="external">');n.b(n.v(n.f("title",q,o,0)));n.b('</span>    <div class="smallprint light">');n.b(n.v(n.d("dateTime.date",q,o,0)));n.b('</div>    <div class="smallprint light">');n.b(n.v(n.d("dateTime.time",q,o,0)));n.b("</div></a>")});m.pop()}i.b("</ol></div>")});k.pop()}if(!g.s(g.f("feed",k,j,1),k,j,1,0,0,"")){g.b('<div class="content"><p>News feed could not be loaded.</p></div>')}return g.fl()})}if((typeof google!=="undefined")&&(navigator.onLine)){if(typeof google.feeds=="undefined"){google.load("feeds","1",{nocss:true,callback:function(){ucsf.news.render(c,e,f,d)}})}else{this.render(c,e,f,d)}}else{c.innerHTML=d.template.render(ucsf.news.loadFromStorage(e))}};var a=document.createElement("script");a.src="//www.google.com/jsapi";document.getElementsByTagName("head")[0].appendChild(a);return b}());