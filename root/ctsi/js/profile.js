mwf.ucsfCtsiProfile=new function(){this.renderProfile=function(A){if(A.hasOwnProperty("Profiles")){if((A.Profiles instanceof Array)&&(A.Profiles.length>0)){var a=A.Profiles[0];var b=document.getElementById("ctsi-menu");var u=document.getElementById("ctsi-header");var n=document.getElementById("ctsi-items");if(a.hasOwnProperty("Name")){u.innerHTML=a.Name;if(a.hasOwnProperty("PhotoURL")){var d=document.createElement("img");d.setAttribute("src","/assets/min/img.php?max_height=80&img="+a.PhotoURL);d.setAttribute("alt","");d.setAttribute("style","border-top-right-radius:0;float:left");d.setAttribute("class","menu-first");var t=u.clientHeight;u.setAttribute("style","height:52px;padding-top:20px");b.insertBefore(d,u)}}if(a.hasOwnProperty("Narrative")){var y=document.createElement("li");var k=document.createElement("a");k.setAttribute("href","javascript:mwf.ucsfCtsiProfile.toggleNarrative();");var f=document.createElement("span");f.setAttribute("class","smallprint");f.setAttribute("id","ctsi-narrative");var o=a.Narrative.substring(0,a.Narrative.substring(0,200).lastIndexOf(" "));f.innerHTML=o+"...";document.getElementById("ctsi-narrative-hidden").innerHTML=a.Narrative;k.appendChild(f);y.appendChild(k);n.appendChild(y)}if(a.hasOwnProperty("Keywords")&&a.Keywords.length>0){var m=a.Keywords;var w=document.createElement("ol");var x=m.length>5?5:m.length;for(var v=0;v<x;v++){var p=document.createElement("li");p.innerHTML=m[v];w.appendChild(p)}var h=document.getElementById("ctsi-keywords");h.innerHTML='<h1 class="content-first light">Research Interests</h1>';h.appendChild(w)}if(a.hasOwnProperty("Publications")&&a.Publications.length>0){var c=a.Publications;var q=document.createElement("ol");var z=c.length>5?5:c.length;for(var s=0;s<z;s++){if(c[s].hasOwnProperty("PublicationTitle")){var r=document.createElement("li");var l=document.createElement("span");l.setAttribute("class","smallprint");l.innerHTML=c[s].PublicationTitle;var g;if(c[s].hasOwnProperty("PublicationSource")&&(c[s].PublicationSource[0].hasOwnProperty("PublicationSourceURL"))&&(c[s].PublicationSource[0].PublicationSourceURL.length>0)){g=document.createElement("a");g.setAttribute("href",c[s].PublicationSource[0].PublicationSourceURL)}else{g=document.createElement("p")}g.appendChild(l);r.appendChild(g);q.appendChild(r)}}var e=document.getElementById("ctsi-publications");e.innerHTML='<h1 class="content-first light">Publications</h1>';e.appendChild(q)}}}};this.getProfile=function(a){mwf.util.importJS("http://profiles.ucsf.edu/CustomAPI/v1/JSONProfile.aspx?FNO="+a+"&callback=mwf.ucsfCtsiProfile.renderProfile&publications=full&mobile=on")};this.toggleNarrative=function(){var a=document.getElementById("ctsi-narrative").innerHTML;document.getElementById("ctsi-narrative").innerHTML=document.getElementById("ctsi-narrative-hidden").innerHTML;document.getElementById("ctsi-narrative-hidden").innerHTML=a}};