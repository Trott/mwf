var ucsf=ucsf||{};ucsf.ctsiProfile={renderProfile:function(e){"use strict";if(e.hasOwnProperty("Profiles")&&e.Profiles instanceof Array&&e.Profiles.length>0){var t,n,o,a,i,r,s,l,c,d,u,h,m,f,g,p,v,w,y,b,E,P,_,I=e.Profiles[0],S=document.getElementById("ctsi-menu"),L=document.getElementById("ctsi-header");if(I.hasOwnProperty("Name")&&(L.innerHTML=I.Name,I.hasOwnProperty("PhotoURL")&&(n=document.createElement("img"),n.setAttribute("src","http://src.sencha.io/80/80/"+I.PhotoURL),n.setAttribute("alt",""),n.setAttribute("style","border-top-right-radius:0;border-bottom-left-radius:.5em;float:left"),o=L.clientHeight,L.setAttribute("style","height:52px;padding-top:20px"),S.insertBefore(n,L))),I.hasOwnProperty("Narrative")&&(t=document.createElement("ol"),S.appendChild(t),a=document.createElement("li"),i=document.createElement("a"),i.setAttribute("href","#"),i.setAttribute("onclick","ucsf.ctsiProfile.toggleNarrative(); return false;"),r=document.createElement("span"),r.setAttribute("class","smallprint"),r.setAttribute("id","ctsi-narrative"),s=I.Narrative.substring(0,I.Narrative.substring(0,200).lastIndexOf(" ")),r.innerHTML=s+"...",document.getElementById("ctsi-narrative-hidden").innerHTML=I.Narrative,i.appendChild(r),a.appendChild(i),t.appendChild(a),n.setAttribute("style","border-top-right-radius:0;float:left")),I.hasOwnProperty("Keywords")&&I.Keywords.length>0){for(l=I.Keywords,c=document.createElement("ol"),d=l.length>5?5:l.length,u=0;d>u;u+=1)h=document.createElement("li"),h.innerHTML=l[u],c.appendChild(h);m=document.getElementById("ctsi-keywords"),m.innerHTML='<h1 class="content-first light">Research Interests</h1>',m.appendChild(c)}if(I.hasOwnProperty("Publications")&&I.Publications.length>0){for(f=I.Publications,g=document.createElement("ol"),p=f.length>5?5:f.length,v=0;p>v;v+=1)f[v].hasOwnProperty("PublicationTitle")&&(w=document.createElement("li"),y=document.createElement("span"),y.setAttribute("class","smallprint"),y.innerHTML=f[v].PublicationTitle,f[v].hasOwnProperty("PublicationSource")&&f[v].PublicationSource[0].hasOwnProperty("PublicationSourceURL")&&f[v].PublicationSource[0].PublicationSourceURL.length>0?(b=document.createElement("a"),b.setAttribute("href",f[v].PublicationSource[0].PublicationSourceURL),b.setAttribute("rel","external")):b=document.createElement("p"),b.appendChild(y),w.appendChild(b),g.appendChild(w));E=document.getElementById("ctsi-publications"),E.innerHTML='<h1 class="content-first light">Recent Publications</h1>',E.appendChild(g)}I.hasOwnProperty("ProfilesURL")&&(P=document.createElement("li"),_=document.createElement("a"),_.innerHTML="Full Research Profile",_.setAttribute("rel","external"),_.setAttribute("href",I.ProfilesURL),document.getElementById("ctsi-full-profile"),P.appendChild(_),document.getElementById("ctsi-full-profile").appendChild(P))}},toggleNarrative:function(){"use strict";var e=document.getElementById("ctsi-narrative").innerHTML;document.getElementById("ctsi-narrative").innerHTML=document.getElementById("ctsi-narrative-hidden").innerHTML,document.getElementById("ctsi-narrative-hidden").innerHTML=e}},window.location.search&&(window.onload=function(){"use strict";var e,t,n=decodeURIComponent(window.location.search),o=n.match(/[&?]fno=([\w.@]+)/);null!==o&&(e=o[1],t=document.createElement("script"),t.src="http://profiles.ucsf.edu/CustomAPI/v1/JSONProfile.aspx?FNO="+e+"&callback=ucsf.ctsiProfile.renderProfile&publications=full&mobile=on",document.body.appendChild(t))});